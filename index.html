<!DOCTYPE>
<html>
	<head>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	</head>

	<body>
	<script>

	T1 = "Hello!"
	C1 = "red"
	T2 = "Goodbye!"
	C2 = "green"

	d3.select("body")
	.append("svg")
	.attr("width", 400)
	.attr("height", 300)

	d3.select("svg")
	.append("rect")
	.attr("x", 100)
	.attr("y", 75)
	.attr("width", 200)
	.attr("height", 150)
	.style("fill", C1)

	d3.select("svg")
	.append("text")
	.attr("x", 200)
	.attr("y", 150)
	.attr("text-anchor", "middle")
	.text(T1)
	.attr("font", "sans-serif")
	.attr("font-size", "30px")

	var toggle = (function(){
	var currentColor = C1;
	var currentWidth = 200;
	var currentHeight = 150;
	var currentX = 100;
	var currentY = 75;
	var currentText = T1;
	var currentSize = "30px";

	return function(){
	currentColor = currentColor == C1 ? C2 : C1;
	currentWidth = currentWidth == 200 ? ((1/3)*200) : 200;
	currentHeight = currentHeight == 150 ? ((1/3)*150) : 150;
	currentX = currentX == 100 ? 166.666 : 100;
	currentY = currentY == 75 ? 125 : 75;
	currentText = currentText == T1 ? T2 : T1;
	currentSize = currentSize == "30px" ? "10px" : "30px";

	d3.select(this)
	.style("fill", currentColor)
	.attr("x", currentX)
	.attr("y", currentY)
	.attr("width", currentWidth)
	.attr("height", currentHeight);

	d3.select("text")
	.attr("font-size", currentSize)
	.text(currentText);

	}
	
	})();

	d3.selectAll("rect")
	.on("click", toggle)
	
	</script>
	</body>
</html>